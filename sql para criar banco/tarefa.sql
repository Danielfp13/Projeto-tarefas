CREATE TABLE usuario(
    id integer NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ) PRIMARY KEY,
    email VARCHAR(100) UNIQUE NOT NULL,
    nome VARCHAR(120) NOT NULL,
    senha VARCHAR(255) NOT NULL
);

CREATE TABLE tarefa
(
    id integer NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ) PRIMARY KEY,
    data_hora timestamp without time zone NOT NULL,
    duracao VARCHAR(15) NOT NULL,
    local VARCHAR(90) NOT NULL,
    nome VARCHAR(120) NOT NULL,
    id_usuario SERIAL REFERENCES usuario (id) ON UPDATE CASCADE ON DELETE NO ACTION
);

CREATE TABLE convidado(
    id integer NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ) PRIMARY KEY,
    nome VARCHAR(120) NOT NULL, 
    id_tarefa SERIAL REFERENCES tarefa(id) ON UPDATE CASCADE ON DELETE NO ACTION
);

CREATE TABLE perfil(
    usuario_id INTEGER NOT NULL REFERENCES usuario (id) ON UPDATE CASCADE ON DELETE NO ACTION,
    perfil INTEGER,
	PRIMARY KEY(usuario_id, perfil)
);
